<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factory Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Top UI Bar -->
    <div class="top-bar">
        <div class="top-left-spacer"></div>
        <div class="research-goal" id="researchGoal">
            <div class="goal-header">
                <span class="goal-icon">üéØ</span>
                <span class="goal-text">Research Level 1: Collect 10 Iron</span>
            </div>
            <div class="goal-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="goalProgressFill"></div>
                </div>
                <span class="progress-text" id="goalProgressText">0%</span>
            </div>
        </div>
        <div class="top-right-controls">
            <div class="power-display">
                <span class="power-icon">‚ö°</span>
                <span class="power-text" id="powerDisplay">0/0</span>
            </div>
            <button class="top-btn" id="helpBtn">‚ùì</button>
            <button class="top-btn" id="recipeBookBtn">üìñ</button>
            <button class="top-btn" id="researchBtn">üî¨</button>
            <button class="top-btn" id="settingsBtn">‚öôÔ∏è</button>
        </div>
    </div>
    
    <!-- Resource Bar (Always Visible) -->
    <div class="resource-bar">
        <div class="resource-item">
            <span class="resource-icon">‚ö°</span>
            <span class="resource-amount" id="ironCount">8</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">üü§</span>
            <span class="resource-amount" id="copperCount">0</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">üî©</span>
            <span class="resource-amount" id="ironRodCount">0</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">üîß</span>
            <span class="resource-amount" id="copperRodCount">0</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">üî•</span>
            <span class="resource-amount" id="steelCount">0</span>
        </div>
            <div class="resource-item">
                <span class="resource-icon">‚öôÔ∏è</span>
                <span class="resource-amount" id="gearCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">üîå</span>
                <span class="resource-amount" id="circuitCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">‚ö°</span>
                <span class="resource-amount" id="motorCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">üíª</span>
                <span class="resource-amount" id="computerCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ü§ñ</span>
                <span class="resource-amount" id="robotCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">‚ö°</span>
                <span class="resource-amount" id="powerCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ü™®</span>
                <span class="resource-amount" id="coalCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">‚ò¢Ô∏è</span>
                <span class="resource-amount" id="uraniumCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ü•á</span>
                <span class="resource-amount" id="goldCount">0</span>
            </div>
    </div>
    
    <!-- Main Game Container -->
    <div class="game-container">
        <!-- Building Menu -->
        <div class="building-menu" id="buildingMenu">
            <div class="menu-header">
                <h3>Buildings</h3>
                <button class="close-btn" id="closeBuildingMenu">&times;</button>
            </div>
            <div class="menu-content">
                <div class="building-item" data-building="ironMiner">
                    <div class="building-icon">‚õèÔ∏è</div>
                    <div class="building-info">
                        <div class="building-name">Iron Miner</div>
                        <div class="building-cost">5 Iron</div>
                    </div>
                </div>
                <div class="building-item" data-building="copperMiner">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="conveyor">
                    <div class="building-icon">‚û°Ô∏è</div>
                    <div class="building-info">
                        <div class="building-name">Conveyor</div>
                        <div class="building-cost">1 Iron</div>
                    </div>
                </div>
                <div class="building-item" data-building="roller">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="storage">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="furnace">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="assembler">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="advancedMiner">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="splitter">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="factory">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                <div class="building-item" data-building="lab">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="circuitFactory">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="motorFactory">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="computerFactory">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="robotFactory">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="quantumLab">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="timeMachine">
                    <div class="building-icon">‚ùì</div>
                    <div class="building-info">
                        <div class="building-name">‚ùì</div>
                        <div class="building-cost">‚ùì</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="submitter">
                    <div class="building-icon">üì§</div>
                    <div class="building-info">
                        <div class="building-name">Submitter</div>
                        <div class="building-cost">2 Iron</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Menu Toggle -->
        <div class="menu-toggle" id="menuToggle">
            <div class="arrow">üî®</div>
        </div>
        
        <!-- Camera Controls -->
        <div class="camera-controls">
            <button class="camera-btn" id="returnToSpawn">üè†</button>
        </div>
        
        <!-- Delete Mode Overlay -->
        <div class="delete-overlay" id="deleteOverlay"></div>
        
        <canvas id="gameCanvas" width="800" height="600"></canvas>
    </div>
    
    <!-- Recipe Book Modal -->
    <div class="modal-overlay" id="recipeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìñ Recipe Book</h2>
                <button class="modal-close" id="closeRecipeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="recipe-categories">
                    <button class="category-btn active" data-category="all">All Items</button>
                    <button class="category-btn" data-category="raw">Raw Materials</button>
                    <button class="category-btn" data-category="processed">Processed</button>
                    <button class="category-btn" data-category="advanced">Advanced</button>
                    <button class="category-btn" data-category="electronic">Electronic</button>
                    <button class="category-btn" data-category="mechanical">Mechanical</button>
                    <button class="category-btn" data-category="ultimate">Ultimate</button>
                </div>
                <div class="materials-list" id="materialsList">
                    <!-- Materials will be populated by JavaScript -->
                </div>
                <div class="recipe-details" id="recipeDetails" style="display: none;">
                    <h3 id="selectedMaterialName"></h3>
                    <div id="selectedMaterialInfo"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Research Modal -->
    <div class="modal-overlay" id="researchModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üî¨ Research Center</h2>
                <button class="modal-close" id="closeResearchModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="research-info">
                    <div class="research-level">
                        <h3>Current Research Level: <span id="currentLevel">0</span></h3>
                        <div class="research-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <span id="progressText">0%</span>
                        </div>
                    </div>
                </div>
                <div class="research-levels" id="researchLevels">
                    <!-- Research levels will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ùì Help & Game Guide</h2>
                <button class="modal-close" id="closeHelpModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>‚ö° Power System</h3>
                    <p><strong>How Power Works:</strong></p>
                    <ul>
                        <li>‚ö° <strong>Power Production:</strong> Coal Generators, Solar Panels, and Nuclear Reactors produce power</li>
                        <li>üîå <strong>Power Consumption:</strong> Most advanced buildings consume power to operate</li>
                        <li>‚öñÔ∏è <strong>Power Efficiency:</strong> If consumption > production, buildings slow down</li>
                        <li>üìä <strong>Power Display:</strong> Shows "Production/Consumption" in top-right corner</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>üèóÔ∏è Building Costs</h3>
                    <p><strong>Resource Requirements:</strong></p>
                    <ul>
                        <li>üèóÔ∏è <strong>Basic Buildings:</strong> Cost only iron or copper (miners, conveyors, submitters)</li>
                        <li>‚öôÔ∏è <strong>Advanced Buildings:</strong> Require multiple special items (gears, steel, circuits, motors, etc.)</li>
                        <li>ü•á <strong>Gold Miners:</strong> Cost 10 iron + 2 gears</li>
                        <li>üè≠ <strong>Circuit Factory:</strong> Cost 15 iron + 3 gears + 5 steel</li>
                        <li>ü§ñ <strong>Robot Factory:</strong> Cost 100 iron + 25 gears + 30 steel + 10 circuits + 3 motors</li>
                        <li>üí∞ <strong>Cost Display:</strong> Hover over buildings to see exact costs</li>
                        <li>üîÑ <strong>Refunds:</strong> Deleting buildings refunds 50% of all resources</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>üî¨ Research System</h3>
                    <p><strong>Progression:</strong></p>
                    <ul>
                        <li>üî¨ <strong>Research Levels:</strong> 8 levels unlock new buildings and items</li>
                        <li>üìã <strong>Requirements:</strong> Create specific items to advance research</li>
                        <li>üè≠ <strong>Labs:</strong> Build labs to generate research points faster</li>
                        <li>üéØ <strong>Goals:</strong> Current research goal shown at top of screen</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>üè≠ Production Chains</h3>
                    <p><strong>Automation:</strong></p>
                    <ul>
                        <li>‚õèÔ∏è <strong>Miners:</strong> Extract raw materials (iron, copper, gold)</li>
                        <li>üîÑ <strong>Conveyors:</strong> Transport items between buildings</li>
                        <li>üè≠ <strong>Factories:</strong> Process materials into advanced items</li>
                        <li>üì¶ <strong>Storage:</strong> Store items for later use</li>
                        <li>‚úÖ <strong>Submitters:</strong> Convert items back to resources</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>üí° Tips</h3>
                    <ul>
                        <li>üéØ <strong>Start Small:</strong> Build basic iron miners and conveyors first</li>
                        <li>‚ö° <strong>Power Early:</strong> Build coal generators before advanced buildings</li>
                        <li>üîç <strong>Hover for Info:</strong> Hover over buildings for descriptions</li>
                        <li>üñ±Ô∏è <strong>Right-Click:</strong> Right-click buildings for detailed status</li>
                        <li>üìñ <strong>Recipe Book:</strong> Check discovered items and their uses</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Debug Modal -->
    <div class="modal-overlay" id="debugModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üêõ Debug Menu</h2>
                <button class="modal-close" id="closeDebugModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="debug-section">
                    <h3>üîß Resource Management</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="addIronBtn">+100 Iron</button>
                        <button class="debug-btn" id="addCopperBtn">+100 Copper</button>
                        <button class="debug-btn" id="addGoldBtn">+100 Gold</button>
                        <button class="debug-btn" id="addSteelBtn">+100 Steel</button>
                        <button class="debug-btn" id="addGearBtn">+100 Gears</button>
                        <button class="debug-btn" id="addCircuitBtn">+100 Circuits</button>
                        <button class="debug-btn" id="addMotorBtn">+100 Motors</button>
                        <button class="debug-btn" id="addComputerBtn">+100 Computers</button>
                        <button class="debug-btn" id="addRobotBtn">+100 Robots</button>
                        <button class="debug-btn" id="addCoalBtn">+100 Coal</button>
                        <button class="debug-btn" id="addUraniumBtn">+100 Uranium</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>‚ö° Power System</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="addPowerBtn">+1000 Power</button>
                        <button class="debug-btn" id="maxPowerBtn">Max Power</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>üî¨ Research System</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="addResearchBtn">+100 Research Points</button>
                        <button class="debug-btn" id="maxResearchBtn">Max Research Level</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>üèóÔ∏è Building Management</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="clearBuildingsBtn">Clear All Buildings</button>
                        <button class="debug-btn" id="unlockAllBtn">Unlock All Buildings</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>üìä Game State</h3>
                    <div class="debug-info">
                        <p><strong>Current Resources:</strong></p>
                        <div id="debugResourceDisplay"></div>
                        <p><strong>Power Grid:</strong> <span id="debugPowerDisplay"></span></p>
                        <p><strong>Research Level:</strong> <span id="debugResearchDisplay"></span></p>
                        <p><strong>Buildings Placed:</strong> <span id="debugBuildingCount"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Settings & Controls</h2>
                <button class="modal-close" id="closeSettingsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Controls</h3>
                    <div class="control-item">
                        <span class="control-key">Click</span>
                        <span class="control-desc">Select building / Place building</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">R</span>
                        <span class="control-desc">Rotate building</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">WASD / Arrows</span>
                        <span class="control-desc">Move camera</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">Shift + Click</span>
                        <span class="control-desc">Delete building</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">ESC</span>
                        <span class="control-desc">Cancel selection</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">Right Click</span>
                        <span class="control-desc">Building details</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">H</span>
                        <span class="control-desc">Return to spawn</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">B</span>
                        <span class="control-desc">Toggle build menu</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">T</span>
                        <span class="control-desc">Open research</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">P</span>
                        <span class="control-desc">Open recipe book</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">1-8</span>
                        <span class="control-desc">Select buildings</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">M</span>
                        <span class="control-desc">Toggle sound</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">H</span>
                        <span class="control-desc">Open help</span>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Game Settings</h3>
                    <div class="setting-item">
                        <label for="gridToggle">Show Grid:</label>
                        <input type="checkbox" id="gridToggle" checked>
                    </div>
                    <div class="setting-item">
                        <label for="soundToggle">Sound Effects:</label>
                        <input type="checkbox" id="soundToggle" checked>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Game Actions</h3>
                    <button class="debug-btn" id="debugMenuBtn">üêõ Debug Menu</button>
                    <button class="reset-btn" id="resetGameBtn">üîÑ Reset Game</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hologram Tutorial Overlay -->
    <div class="hologram-overlay" id="hologramTutorial">
        <div class="hologram-tutorial">
            <h2>üè≠ Welcome to Factory Game!</h2>
            <p>Let's build your first factory! Follow the holographic guides to place your first buildings.</p>
            <div class="tutorial-steps">
                <div class="tutorial-step">
                    <span class="step-icon">‚õèÔ∏è</span>
                    <span class="step-text">1. Place Miner</span>
                </div>
                <div class="tutorial-step">
                    <span class="step-icon">‚û°Ô∏è</span>
                    <span class="step-text">2. Connect Conveyor</span>
                </div>
                <div class="tutorial-step">
                    <span class="step-icon">üì§</span>
                    <span class="step-text">3. Add Submitter</span>
                </div>
            </div>
            <p>Click on the holographic buildings to place them, then watch your factory come to life!</p>
            <div class="tutorial-buttons">
                <button class="tutorial-btn" id="startTutorialBtn">Start Tutorial</button>
                <button class="tutorial-btn secondary" id="skipTutorialBtn">Skip Tutorial</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>

