<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factory Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Top UI Bar -->
    <div class="top-bar">
        <div class="top-left-spacer"></div>
        <div class="research-goal" id="researchGoal">
            <div class="goal-header">
                <span class="goal-icon">ğŸ¯</span>
                <span class="goal-text">Research Level 1: Collect 10 Iron</span>
            </div>
            <div class="goal-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="goalProgressFill"></div>
                </div>
                <span class="progress-text" id="goalProgressText">0%</span>
            </div>
        </div>
        <div class="top-right-controls">
            <div class="power-display">
                <span class="power-icon">âš¡</span>
                <span class="power-text" id="powerDisplay">0/0</span>
            </div>
            <button class="top-btn" id="helpBtn">â“</button>
            <button class="top-btn" id="recipeBookBtn">ğŸ“–</button>
            <button class="top-btn" id="researchBtn">ğŸ”¬</button>
            <button class="top-btn" id="settingsBtn">âš™ï¸</button>
        </div>
    </div>
    
    <!-- Resource Bar (Always Visible) -->
    <div class="resource-bar">
        <div class="resource-item">
            <span class="resource-icon">âš¡</span>
            <span class="resource-amount" id="ironCount">8</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">ğŸŸ¤</span>
            <span class="resource-amount" id="copperCount">0</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">ğŸ”©</span>
            <span class="resource-amount" id="ironRodCount">0</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">ğŸ”§</span>
            <span class="resource-amount" id="copperRodCount">0</span>
        </div>
        <div class="resource-item">
            <span class="resource-icon">ğŸ”¥</span>
            <span class="resource-amount" id="steelCount">0</span>
        </div>
            <div class="resource-item">
                <span class="resource-icon">âš™ï¸</span>
                <span class="resource-amount" id="gearCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ğŸ”Œ</span>
                <span class="resource-amount" id="circuitCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">âš¡</span>
                <span class="resource-amount" id="motorCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ğŸ’»</span>
                <span class="resource-amount" id="computerCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ğŸ¤–</span>
                <span class="resource-amount" id="robotCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">âš¡</span>
                <span class="resource-amount" id="powerCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ğŸª¨</span>
                <span class="resource-amount" id="coalCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">â˜¢ï¸</span>
                <span class="resource-amount" id="uraniumCount">0</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ğŸ¥‡</span>
                <span class="resource-amount" id="goldCount">0</span>
            </div>
    </div>
    
    <!-- Main Game Container -->
    <div class="game-container">
        <!-- Building Menu -->
        <div class="building-menu" id="buildingMenu">
            <div class="menu-header">
                <h3>Buildings</h3>
                <button class="close-btn" id="closeBuildingMenu">&times;</button>
            </div>
            <div class="menu-content">
                <div class="building-item" data-building="ironMiner">
                    <div class="building-icon">â›ï¸</div>
                    <div class="building-info">
                        <div class="building-name">Iron Miner</div>
                        <div class="building-cost">5 Iron</div>
                    </div>
                </div>
                <div class="building-item" data-building="copperMiner">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="conveyor">
                    <div class="building-icon">â¡ï¸</div>
                    <div class="building-info">
                        <div class="building-name">Conveyor</div>
                        <div class="building-cost">1 Iron</div>
                    </div>
                </div>
                <div class="building-item" data-building="roller">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="storage">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="furnace">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="assembler">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="advancedMiner">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="splitter">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="factory">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                <div class="building-item" data-building="lab">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="circuitFactory">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="motorFactory">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="computerFactory">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="robotFactory">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="quantumLab">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="timeMachine">
                    <div class="building-icon">â“</div>
                    <div class="building-info">
                        <div class="building-name">â“</div>
                        <div class="building-cost">â“</div>
                    </div>
                </div>
                
                <div class="building-item" data-building="submitter">
                    <div class="building-icon">ğŸ“¤</div>
                    <div class="building-info">
                        <div class="building-name">Submitter</div>
                        <div class="building-cost">2 Iron</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Menu Toggle -->
        <div class="menu-toggle" id="menuToggle">
            <div class="arrow">ğŸ”¨</div>
        </div>
        
        <!-- Camera Controls -->
        <div class="camera-controls">
            <button class="camera-btn" id="returnToSpawn">ğŸ </button>
        </div>
        
        <!-- Delete Mode Overlay -->
        <div class="delete-overlay" id="deleteOverlay"></div>
        
        <canvas id="gameCanvas" width="800" height="600"></canvas>
    </div>
    
    <!-- Recipe Book Modal -->
    <div class="modal-overlay" id="recipeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“– Recipe Book</h2>
                <button class="modal-close" id="closeRecipeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="recipe-categories">
                    <button class="category-btn active" data-category="all">All Items</button>
                    <button class="category-btn" data-category="raw">Raw Materials</button>
                    <button class="category-btn" data-category="processed">Processed</button>
                    <button class="category-btn" data-category="advanced">Advanced</button>
                    <button class="category-btn" data-category="electronic">Electronic</button>
                    <button class="category-btn" data-category="mechanical">Mechanical</button>
                    <button class="category-btn" data-category="ultimate">Ultimate</button>
                </div>
                <div class="materials-list" id="materialsList">
                    <!-- Materials will be populated by JavaScript -->
                </div>
                <div class="recipe-details" id="recipeDetails" style="display: none;">
                    <h3 id="selectedMaterialName"></h3>
                    <div id="selectedMaterialInfo"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Research Modal -->
    <div class="modal-overlay" id="researchModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”¬ Research Center</h2>
                <button class="modal-close" id="closeResearchModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="research-info">
                    <div class="research-level">
                        <h3>Current Research Level: <span id="currentLevel">0</span></h3>
                        <div class="research-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <span id="progressText">0%</span>
                        </div>
                    </div>
                </div>
                <div class="research-levels" id="researchLevels">
                    <!-- Research levels will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>â“ Help & Game Guide</h2>
                <button class="modal-close" id="closeHelpModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>âš¡ Power System</h3>
                    <p><strong>How Power Works:</strong></p>
                    <ul>
                        <li>âš¡ <strong>Power Production:</strong> Coal Generators, Solar Panels, and Nuclear Reactors produce power</li>
                        <li>ğŸ”Œ <strong>Power Consumption:</strong> Most advanced buildings consume power to operate</li>
                        <li>âš–ï¸ <strong>Power Efficiency:</strong> If consumption > production, buildings slow down</li>
                        <li>ğŸ“Š <strong>Power Display:</strong> Shows "Production/Consumption" in top-right corner</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>ğŸ—ï¸ Building Costs</h3>
                    <p><strong>Resource Requirements:</strong></p>
                    <ul>
                        <li>ğŸ—ï¸ <strong>Basic Buildings:</strong> Cost only iron or copper (miners, conveyors, submitters)</li>
                        <li>âš™ï¸ <strong>Advanced Buildings:</strong> Require multiple special items (gears, steel, circuits, motors, etc.)</li>
                        <li>ğŸ¥‡ <strong>Gold Miners:</strong> Cost 10 iron + 2 gears</li>
                        <li>ğŸ­ <strong>Circuit Factory:</strong> Cost 15 iron + 3 gears + 5 steel</li>
                        <li>ğŸ¤– <strong>Robot Factory:</strong> Cost 100 iron + 25 gears + 30 steel + 10 circuits + 3 motors</li>
                        <li>ğŸ’° <strong>Cost Display:</strong> Hover over buildings to see exact costs</li>
                        <li>ğŸ”„ <strong>Refunds:</strong> Deleting buildings refunds 50% of all resources</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>ğŸ”¬ Research System</h3>
                    <p><strong>Progression:</strong></p>
                    <ul>
                        <li>ğŸ”¬ <strong>Research Levels:</strong> 8 levels unlock new buildings and items</li>
                        <li>ğŸ“‹ <strong>Requirements:</strong> Create specific items to advance research</li>
                        <li>ğŸ­ <strong>Labs:</strong> Build labs to generate research points faster</li>
                        <li>ğŸ¯ <strong>Goals:</strong> Current research goal shown at top of screen</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>ğŸ­ Production Chains</h3>
                    <p><strong>Automation:</strong></p>
                    <ul>
                        <li>â›ï¸ <strong>Miners:</strong> Extract raw materials (iron, copper, gold)</li>
                        <li>ğŸ”„ <strong>Conveyors:</strong> Transport items between buildings</li>
                        <li>ğŸ­ <strong>Factories:</strong> Process materials into advanced items</li>
                        <li>ğŸ“¦ <strong>Storage:</strong> Store items for later use</li>
                        <li>âœ… <strong>Submitters:</strong> Convert items back to resources</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>ğŸ’¡ Tips</h3>
                    <ul>
                        <li>ğŸ¯ <strong>Start Small:</strong> Build basic iron miners and conveyors first</li>
                        <li>âš¡ <strong>Power Early:</strong> Build coal generators before advanced buildings</li>
                        <li>ğŸ” <strong>Hover for Info:</strong> Hover over buildings for descriptions</li>
                        <li>ğŸ–±ï¸ <strong>Right-Click:</strong> Right-click buildings for detailed status</li>
                        <li>ğŸ“– <strong>Recipe Book:</strong> Check discovered items and their uses</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Debug Modal -->
    <div class="modal-overlay" id="debugModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ› Debug Menu</h2>
                <button class="modal-close" id="closeDebugModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="debug-section">
                    <h3>ğŸ”§ Resource Management</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="addIronBtn">+100 Iron</button>
                        <button class="debug-btn" id="addCopperBtn">+100 Copper</button>
                        <button class="debug-btn" id="addGoldBtn">+100 Gold</button>
                        <button class="debug-btn" id="addSteelBtn">+100 Steel</button>
                        <button class="debug-btn" id="addGearBtn">+100 Gears</button>
                        <button class="debug-btn" id="addCircuitBtn">+100 Circuits</button>
                        <button class="debug-btn" id="addMotorBtn">+100 Motors</button>
                        <button class="debug-btn" id="addComputerBtn">+100 Computers</button>
                        <button class="debug-btn" id="addRobotBtn">+100 Robots</button>
                        <button class="debug-btn" id="addCoalBtn">+100 Coal</button>
                        <button class="debug-btn" id="addUraniumBtn">+100 Uranium</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>âš¡ Power System</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="addPowerBtn">+1000 Power</button>
                        <button class="debug-btn" id="maxPowerBtn">Max Power</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>ğŸ”¬ Research System</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="addResearchBtn">+100 Research Points</button>
                        <button class="debug-btn" id="maxResearchBtn">Max Research Level</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>ğŸ—ï¸ Building Management</h3>
                    <div class="debug-controls">
                        <button class="debug-btn" id="clearBuildingsBtn">Clear All Buildings</button>
                        <button class="debug-btn" id="unlockAllBtn">Unlock All Buildings</button>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>ğŸ“Š Game State</h3>
                    <div class="debug-info">
                        <p><strong>Current Resources:</strong></p>
                        <div id="debugResourceDisplay"></div>
                        <p><strong>Power Grid:</strong> <span id="debugPowerDisplay"></span></p>
                        <p><strong>Research Level:</strong> <span id="debugResearchDisplay"></span></p>
                        <p><strong>Buildings Placed:</strong> <span id="debugBuildingCount"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âš™ï¸ Settings & Controls</h2>
                <button class="modal-close" id="closeSettingsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Controls</h3>
                    <div class="control-item">
                        <span class="control-key">Click</span>
                        <span class="control-desc">Select building / Place building</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">R</span>
                        <span class="control-desc">Rotate building</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">WASD / Arrows</span>
                        <span class="control-desc">Move camera</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">Shift + Click</span>
                        <span class="control-desc">Delete building</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">ESC</span>
                        <span class="control-desc">Cancel selection</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">Right Click</span>
                        <span class="control-desc">Building details</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">H</span>
                        <span class="control-desc">Return to spawn</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">B</span>
                        <span class="control-desc">Toggle build menu</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">T</span>
                        <span class="control-desc">Open research</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">P</span>
                        <span class="control-desc">Open recipe book</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">1-8</span>
                        <span class="control-desc">Select buildings</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">M</span>
                        <span class="control-desc">Toggle sound</span>
                    </div>
                    <div class="control-item">
                        <span class="control-key">H</span>
                        <span class="control-desc">Open help</span>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Game Settings</h3>
                    <div class="setting-item">
                        <label for="gridToggle">Show Grid:</label>
                        <input type="checkbox" id="gridToggle" checked>
                    </div>
                    <div class="setting-item">
                        <label for="soundToggle">Sound Effects:</label>
                        <input type="checkbox" id="soundToggle" checked>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Game Actions</h3>
                    <button class="debug-btn" id="debugMenuBtn">ğŸ› Debug Menu</button>
                    <button class="reset-btn" id="resetGameBtn">ğŸ”„ Reset Game</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hologram Tutorial Overlay -->
    <div class="hologram-overlay" id="hologramTutorial">
        <div class="hologram-tutorial">
            <h2>ğŸ­ Welcome to Factory Game!</h2>
            <p>Let's build your first factory! Follow the holographic guides to place your first buildings.</p>
            <div class="tutorial-steps">
                <div class="tutorial-step">
                    <span class="step-icon">â›ï¸</span>
                    <span class="step-text">1. Place Miner</span>
                </div>
                <div class="tutorial-step">
                    <span class="step-icon">â¡ï¸</span>
                    <span class="step-text">2. Connect Conveyor</span>
                </div>
                <div class="tutorial-step">
                    <span class="step-icon">ğŸ“¤</span>
                    <span class="step-text">3. Add Submitter</span>
                </div>
            </div>
            <p>Click on the holographic buildings to place them, then watch your factory come to life!</p>
            <div class="tutorial-buttons">
                <button class="tutorial-btn" id="startTutorialBtn">Start Tutorial</button>
                <button class="tutorial-btn secondary" id="skipTutorialBtn">Skip Tutorial</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>

